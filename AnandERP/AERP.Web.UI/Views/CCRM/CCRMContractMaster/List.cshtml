@model AERP.ViewModel.CCRMContractMasterViewModel

<section id="main" data-layout="layout-1" style="background:#bfc6ca;height:1000px;">
    <div id="custom-content">
        <div class="block-header">
            <h2 style="text-transform: none;background: #607d8b;margin-top: -100px;line-height: 2.5;color: white;">&nbsp;<i class="zmdi zmdi-view-toc"></i>&nbsp;Create Contract Master</h2>
        </div>
        <div class="card">
            <div class="card-header" style="background:#bfc6ca;margin-top:-24px;">
                <ul class="actions">

                    <li>
                        <a class="mfpAjaxModal" href="@Url.Action("Create", "CCRMContractMaster", new { })">
                            <i class="btn btn-info " style="margin-left: -110px;color: white;font-size: initial;margin-top:-109px;background-color:#b80c0c">Search</i>
                        </a>
                    </li>


                </ul>
            </div>
            <div class="card-body card-padding" style="background:#bfc6ca;">
                <div id="displayErrorMessage" role="alert" hidden class="alert">
                    <button class="close" type="button"><span aria-hidden="true">×</span></button>
                    <p id="messageContent"></p>
                </div>
                <form id="FormCreateCCRMContractMaster">

                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary(true)


                    <div class="col-sm-6" style="border:solid 2px black;height:880px;background: white;margin-left: -9px;">
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <div class="form-group fg-line">
                                    @Html.LabelFor(model => model.FinancialyearID, new { })
                                    @*@Html.TextBoxFor(model => model.AccSessionID, new { @class = "form-control input-sm typeahead" })*@
                                    @Html.DropDownListFor(model => model.FinancialyearID, (SelectList)ViewBag.AccountSessionList, "---Select Account Session ---", new { @class = "form-control input-sm" })
                                </div>
                                @Html.ValidationMessageFor(model => model.FinancialyearID)
                            </div>
                            @*</div>
                                <div class="col-sm-12">*@
                            <div class="col-sm-6">
                                @Html.LabelFor(model => model.ContractDate, new { style = "" })
                                <div class="form-group fg-line dtp-container">
                                    @Html.TextBoxFor(model => model.ContractDate, new { Value = "" + DateTime.UtcNow.ToString("dd MMM yyyy") + "", Readonly = "True", @class = "form-control", style = "background-color:#fff", data_val = "true", data_toggle = "tooltip", data_placement = "top", data_original_title = "Date" })
                                </div>
                            </div>
                            <div class="col-sm-6">

                                <span style="color:red">*</span>@Html.LabelFor(model => model.ContractType, new { })
                                <div class="form-group fg-line">
                                    @Html.DropDownListFor(model => model.ContractTypeId, (SelectList)ViewBag.CCRMContractTypesMasterList, "-----Select  Contract-----", new { @class = "form-control input-sm" })
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.ContractNo, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.ContractNo, new { @class = "form-control", maxlength = "100", style = "", disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(model => model.ContractNo)
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span>

                                @Html.HiddenFor(model => model.ID)
                                @Html.LabelFor(model => model.SerialNo, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.SerialNo, new { @class = "form-control", maxlength = "100", style = "" })
                                </div>
                                @Html.ValidationMessageFor(model => model.SerialNo)
                            </div>
                            <div class="col-sm-6">
                                @Html.HiddenFor(model => model.ModelNo)
                                <span style="color:red">*</span>@Html.LabelFor(model => model.ModelNo, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.ItemDescription, new { @class = "form-control", maxlength = "100", style = "", disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(model => model.ItemDescription)
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.MIFName, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.MIFName, new { @class = "form-control", maxlength = "100", style = "" })
                                </div>
                                @Html.ValidationMessageFor(model => model.MIFName)
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.MIFAddress, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.MIFAddress, new { @class = "form-control", maxlength = "100", style = "", disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(model => model.MIFAddress)
                            </div>
                            <div class="col-sm-6">
                                @Html.HiddenFor(model => model.CustomerMasterID)
                                <span style="color:red">*</span>@Html.LabelFor(model => model.CustomerName, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.CustomerName, new { @class = "form-control", maxlength = "100", style = "", disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(model => model.CustomerName)
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.CustomerAddress, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.CustomerAddress, new { @class = "form-control", maxlength = "100", style = "", disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(model => model.CustomerAddress)
                            </div>

                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.Colour, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.Colour, new { @class = "form-control", maxlength = "100", style = "", disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(model => model.Colour)
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.PaperSize, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.PaperSize, new { @class = "form-control", maxlength = "100", style = "", disabled = "disabled" })
                                </div>
                                @Html.ValidationMessageFor(model => model.PaperSize)
                            </div>

                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.ContractOpDate, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.ContractOpDate, new { @class = "form-control", maxlength = "200", style = "" })
                                </div>
                                @Html.ValidationMessageFor(model => model.ContractOpDate)
                            </div>

                            <div class="col-sm-6">
                                <span style="color:red">*</span> @Html.LabelFor(model => model.ContractClosingDate, new { style = "" })
                                <div class="form-group fg-line dtp-container">
                                    @Html.TextBoxFor(model => model.ContractClosingDate, new { @class = "form-control input-sm typeahead" })
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.CustOrderNo, new { style = "" })
                                <div class="form-group  fg-line">
                                    @Html.TextBoxFor(model => model.CustOrderNo, new { @class = "form-control", maxlength = "100", style = "" })
                                </div>
                                @Html.ValidationMessageFor(model => model.CustOrderNo)
                            </div>

                            <div class="col-sm-6">
                                <span style="color:red">*</span> @Html.LabelFor(model => model.CustOrderDate, new { style = "" })
                                <div class="form-group fg-line dtp-container">
                                    @Html.TextBoxFor(model => model.CustOrderDate, new { @class = "form-control input-sm typeahead" })
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-6">

                                <span style="color:red">*</span>@Html.LabelFor(model => model.BillType, new { })
                                <div class="form-group fg-line">
                                    @Html.DropDownListFor(model => model.BillTypeId, (SelectList)ViewBag.CCRMBillTypeMasterList, "-----Select  BillType-----", new { @class = "form-control input-sm" })
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.ContractStatus, new { style = "" })
                                <div class="form-group  fg-line select">
                                    @Html.DropDownList("ContractStatus", ViewData["ContractStatus"] as List<SelectListItem>, new { style = "", @class = "form-control" })
                                </div>
                                @Html.ValidationMessageFor(model => model.ContractStatus)
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6" style="border:solid 2px black;height:615px;background: white;margin-left: 8px;">
                        @*<div class="col-sm-12">*@
                        <table id="tblData" class="table" style="background:white;">
                            <thead>
                                <tr>
                                    <th >   </th>
                                    <th >A4Mono</th>
                                    <th >A4Col</th>
                                    <th >A3Mono</th>
                                    <th >A3Col</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td>Contract Start Mtr: </td>
                                    <td>@Html.TextBoxFor(model => model.StartReadA4Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.StartReadA4Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.StartReadA3Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.StartReadA3Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                </tr>
                                <tr>
                                    <td>Per Copy Rate:</td>
                                    <td>@Html.TextBoxFor(model => model.RentPerCopyA4Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.RentPerCopyA4Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.RentPerCopyA3Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.RentPerCopyA3Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                </tr>
                                <tr>
                                    <td>Mthly Free Copies :</td>
                                    <td>@Html.TextBoxFor(model => model.FreeCopiesA4Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.FreeCopiesA4Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.FreeCopiesA3Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.FreeCopiesA4Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                </tr>
                                <tr>
                                    <td>Mthly Min Copies :</td>
                                    <td>@Html.TextBoxFor(model => model.MinCopiesA4Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.MinCopiesA4Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.MinCopiesA3Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.MinCopiesA3Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                </tr>
                                <tr>
                                    <td>Total Free Copies:</td>
                                    <td>@Html.TextBoxFor(model => model.TotalFreeA4Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.TotalFreeA4Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.TotalFreeA3Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.TotalFreeA3Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                </tr>
                                <tr>
                                    <td>Free Copies Upto:</td>
                                    <td>@Html.TextBoxFor(model => model.InitFreeCopiesA4Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.InitFreeCopiesA4Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.InitFreeCopiesA3Mono, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.TextBoxFor(model => model.InitFreeCopiesA3Col, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                </tr>

                                <tr>

                                    <td>@Html.LabelFor(model => model.ContractValue, new { })</td>
                                    <td>@Html.TextBoxFor(model => model.ContractValue, new { @class = "form-control", maxlength = "100", style = "" })</td>

                                    <td>@Html.LabelFor(model => model.BilledValue, new { })</td>
                                    <td>@Html.TextBoxFor(model => model.BilledValue, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                </tr>

                                <tr>
                                    <td>@Html.LabelFor(model => model.RentalAmt, new { })</td>
                                    <td>@Html.TextBoxFor(model => model.RentalAmt, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                    <td>@Html.LabelFor(model => model.WastePerc, new { })</td>
                                    <td>@Html.TextBoxFor(model => model.WastePerc, new { @class = "form-control", maxlength = "100", style = "" })</td>
                                </tr>

                            </tbody>
                        </table>
                        @*</div>*@

                        <div id="divAllocateJob" class="row" style="padding:10px 30px;background:white">

                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Jan, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Jan" name="Jan" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>

                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Feb, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Feb" name="Feb" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>


                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Mar, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Mar" name="Mar" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>

                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Apr, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Apr" name="Apr" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.May, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="May" name="May" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Jun, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Jun" name="Jun" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Jul, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Jul" name="Jul" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Aug, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Aug" name="Aug" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Sep, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Sep" name="Sep" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Oct, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Oct" name="Oct" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Nov, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Nov" name="Nov" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group fg-line">
                                    <label style="margin-top: 2%; margin-bottom: 3%;">
                                        @Html.LabelFor(model => model.Dec, new { style = "padding-left: 0px; margin-top:2%;" })

                                    </label>
                                </div>
                                <div class="checkbox col-sm-1">
                                    <input type="checkbox" value="1" id="Dec" name="Dec" class="1">
                                    <i class="input-helper"></i>

                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6" style="border:solid 2px black;height:260px;background: white;margin-left: 8px;margin-top:6px;">
                        <div class="col-sm-12">
                            <div class="col-sm-6">
                                <span style="color:red">*</span> @Html.LabelFor(model => model.AnnualCharges, new { style = "" })
                                <div class="form-group fg-line ">
                                    @Html.TextBoxFor(model => model.AnnualCharges, new { @class = "form-control", maxlength = "100", style = "" })
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span>@Html.LabelFor(model => model.ApplicableMonth, new { style = "" })
                                <div class="form-group  fg-line select">
                                    @Html.DropDownList("ApplicableMonth", ViewData["ApplicableMonth"] as List<SelectListItem>, new { style = "", @class = "form-control" })
                                </div>
                                @Html.ValidationMessageFor(model => model.ApplicableMonth)
                            </div>
                            <div class="col-sm-4">
                                <span style="color:red">*</span> @Html.LabelFor(model => model.BasicCharges, new { style = "" })
                                <div class="form-group fg-line ">
                                    @Html.TextBoxFor(model => model.BasicCharges, new { @class = "form-control", maxlength = "100", style = "" })
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <span style="color:red">*</span> @Html.LabelFor(model => model.PMPeriod, new { style = "" })
                                <div class="form-group fg-line ">
                                    @Html.TextBoxFor(model => model.PMPeriod, new { @class = "form-control", maxlength = "100", style = "" })
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <span style="color:red">*</span> @Html.LabelFor(model => model.CallsAllowed, new { style = "" })
                                <div class="form-group fg-line ">
                                    @Html.TextBoxFor(model => model.CallsAllowed, new { @class = "form-control", maxlength = "100", style = "" })
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <span style="color:red">*</span> @Html.LabelFor(model => model.Remarks, new { style = "" })
                                <div class="form-group fg-line ">
                                    @Html.TextBoxFor(model => model.Remarks, new { @class = "form-control", maxlength = "100", style = "" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-left: 2%; ">
                            <input class="btn btn-info btn-sm m-t-10 waves-effect" value="@Resources.ButtonAction_Submit" id="CreateCCRMContractMasterRecord" type="button" />
                            @*<input name="" id="reset" type="submit" class="btn btn-default" value="@Resources.ButtonAction_Reset" />*@
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
    <script src="@Url.Content("~/Scripts/jquery.validate.js") " type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            CCRMContractMaster.Initialize();
            //SerialNo serachlist
            mapSerialNo = [];
            var getDataSerialNo = function () {

                return function findMatches(q, cb) {

                    var matches, substringRegex;

                    // an array that will be populated with substring matches
                    matches = [];

                    // regex used to determine if a string contains the substring `q`
                    substrRegex = new RegExp(q, 'i');

                    $.ajax({
                        url: "/CCRMMIFMasterAndDetails/GetCCRMContractMasterSerialNoSearchList",
                        type: "POST",
                        data: { term: q },
                        dataType: "json",
                        success: function (data) {

                            // iterate through the pool of strings and for any string that
                            // contains the substring `q`, add it to the `matches` array
                            //alert(data);
                            //console.log(data);
                            $.each(data, function (i, response) {

                                if (substrRegex.test(response.SerialNo)) {
                                    mapSerialNo[response.SerialNo] = response;
                                    matches.push(response.SerialNo);

                                }


                            });

                        },
                        async: false
                    })
                    cb(matches);
                };

            };

            $("#SerialNo").typeahead({
                hint: true,
                highlight: true,
                minLength: 1
            }, {
                source: getDataSerialNo()
            }).on("typeahead:selected", function (obj, item) {
                debugger;

                $("#SerialNo").val(mapSerialNo[item].SerialNo);

                $("#MIFName").val(mapSerialNo[item].MIFTitle);
                $("#MIFAddress").val(mapSerialNo[item].MIFAddress);
                $("#ModelNo").val(mapSerialNo[item].ModelNo);
                $("#CustomerName").val(mapSerialNo[item].CustomerMasterName);
                $("#CustomerMasterID").val(mapSerialNo[item].CustomerMasterID);
                $("#CustomerAddress").val(mapSerialNo[item].CustomerAddress);
                $("#ItemDescription").val(mapSerialNo[item].ItemDescription);
                $("#ID").val(mapSerialNo[item].ID);
                $("#Colour").val(mapSerialNo[item].ColorMono);
                $("#PaperSize").val(mapSerialNo[item].PaperSize);
                $("#ContractOpDate").val(mapSerialNo[item].ContractOpDate);
                $("#ContractClosingDate").val(mapSerialNo[item].ContractClosingDate);
                // $("#CustomerContactPersonName").val(mapSerialNo[item].CustomerContactPersonName);
                if ($("#Colour").val() == "2") {
                    $("#Colour").val('COLOR');
                }
                else {
                    $("#Colour").val('MONO');

                }
            });
            $('#SerialNo').on("keydown", function (e) {
                if (e.keyCode == 8 || e.keyCode == 46) {
                    $('#SerialNo').typeahead('val', '');
                    $('#SerialNo').val("");

                    $('#CustomerAddress').val("");
                    $("#MIFName").val("");
                    $("#MIFAddress").val("");
                    $("#ModelNo").val("");
                    $("#CustomerName").val("");
                    $('#CustomerMasterID').val('0');
                    $("#CustomerAddress").val("");
                    $("#ItemDescription").val("");
                    $("#Colour").val("");
                    $("#PaperSize").val("");
                    $("#ContractOpDate").val("");
                    $("#ContractClosingDate").val("");
                }
            });
            //SerialNo serachlist
            mapMIFTitle = [];
            var getDataMIFTitle = function () {

                return function findMatches(q, cb) {

                    var matches, substringRegex;

                    // an array that will be populated with substring matches
                    matches = [];

                    // regex used to determine if a string contains the substring `q`
                    substrRegex = new RegExp(q, 'i');

                    $.ajax({
                        url: "/CCRMMIFMasterAndDetails/GetCCRMMIFSerialNoSearchList",
                        type: "POST",
                        data: { term: q },
                        dataType: "json",
                        success: function (data) {

                            // iterate through the pool of strings and for any string that
                            // contains the substring `q`, add it to the `matches` array
                            //alert(data);
                            //console.log(data);
                            $.each(data, function (i, response) {

                                if (substrRegex.test(response.MIFTitle)) {
                                    mapMIFTitle[response.MIFTitle] = response;
                                    matches.push(response.MIFTitle);

                                }


                            });

                        },
                        async: false
                    })
                    cb(matches);
                };

            };

            $("#MIFName").typeahead({
                hint: true,
                highlight: true,
                minLength: 1
            }, {
                source: getDataMIFTitle()
            }).on("typeahead:selected", function (obj, item) {
                debugger;

                $("#SerialNo").val(mapMIFTitle[item].SerialNo);

                $("#MIFName").val(mapMIFTitle[item].MIFTitle);
                $("#MIFAddress").val(mapMIFTitle[item].MIFAddress);
                $("#ModelNo").val(mapMIFTitle[item].ModelNo);
                $("#CustomerName").val(mapMIFTitle[item].CustomerMasterName);
                $("#CustomerMasterID").val(mapMIFTitle[item].CustomerMasterID);
                $("#CustomerAddress").val(mapMIFTitle[item].CustomerAddress);
                $("#ItemDescription").val(mapMIFTitle[item].ItemDescription);
                $("#ID").val(mapMIFTitle[item].ID);
                $("#Colour").val(mapMIFTitle[item].ColorMono);
                $("#PaperSize").val(mapMIFTitle[item].PaperSize);
                $("#ContractOpDate").val(mapMIFTitle[item].ContractOpDate);
                $("#ContractClosingDate").val(mapMIFTitle[item].ContractClosingDate);
                // $("#CustomerContactPersonName").val(mapSerialNo[item].CustomerContactPersonName);
                if ($("#Colour").val() == "2") {
                    $("#Colour").val('COLOR');
                }
                else {
                    $("#Colour").val('MONO');

                }
            });
            $('#MIFName').on("keydown", function (e) {
                if (e.keyCode == 8 || e.keyCode == 46) {
                    $('#MIFName').typeahead('val', '');
                    $('#MIFName').val("");

                    $('#CustomerAddress').val("");
                    $('#SerialNo').val("");
                   // $("#MIFName").val("");
                    $("#MIFAddress").val("");
                    $("#ModelNo").val("");
                    $("#CustomerName").val("");
                    $('#CustomerMasterID').val('0');
                    $("#CustomerAddress").val("");
                    $("#ItemDescription").val("");
                    $("#Colour").val("");
                    $("#PaperSize").val("");
                    $("#ContractOpDate").val("");
                    $("#ContractClosingDate").val("");
                }
            });
        });


    </script>
</section>







